# nsg_with_csv_rules

> This project was generated by [generator-tf-module](https://github.com/sudokar/generator-tf-module)

## Overview

This module will create an NSG (if required) and takes a CSV of NSG rules that it will create rules from via Terraform

## Usage

```hcl
resource "azurerm_resource_group" "main" {
  name     = var.name
  location = var.region
}

module "nsg" {
  source  = "Azure/network-security-group/azurerm"
  version = "3.4.1"

  resource_group_name = azurerm_resource_group.main.name
  security_group_name = "${var.name}-nsg"

  tags = {
    Owner = var.name
  }

  depends_on = [azurerm_resource_group.main]
}

module "nsg_rules" {
  source = "./modules/az-nsg-using-csv"

  nsg_resource_group_name = azurerm_resource_group.main.name
  nsg_name                = module.nsg.network_security_group_name
  csv_file_location       = "${path.module}/terratest.csv"

}
```

<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 0.12.0, < 0.14 |
| <a name="requirement_azurerm"></a> [azurerm](#requirement\_azurerm) | >= 2.4.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_azurerm"></a> [azurerm](#provider\_azurerm) | >= 2.4.0 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [azurerm_network_security_rule.inbound_rules](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |
| [azurerm_network_security_rule.outbound_rules](https://registry.terraform.io/providers/hashicorp/azurerm/latest/docs/resources/network_security_rule) | resource |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_csv_file_location"></a> [csv\_file\_location](#input\_csv\_file\_location) | The file location, local to the Terraform code, of the CSV file to use for rules | `string` | n/a | yes |
| <a name="input_nsg_name"></a> [nsg\_name](#input\_nsg\_name) | Name of the Network Security Group these rules will be added to | `string` | n/a | yes |
| <a name="input_nsg_resource_group_name"></a> [nsg\_resource\_group\_name](#input\_nsg\_resource\_group\_name) | Name of the Resource Group that the Network Security Group exists within | `string` | n/a | yes |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_inbound_rules"></a> [inbound\_rules](#output\_inbound\_rules) | n/a |
| <a name="output_outbound_rules"></a> [outbound\_rules](#output\_outbound\_rules) | n/a |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->

## Development

### Prerequisites

- [terraform](https://learn.hashicorp.com/terraform/getting-started/install#installing-terraform)
- [terraform-docs](https://github.com/segmentio/terraform-docs)
- [pre-commit](https://pre-commit.com/#install)
- [golang](https://golang.org/doc/install#install)
- [golint](https://github.com/golang/lint#installation)

### Configurations

- Configure pre-commit hooks
```sh
pre-commit install
```


- Configure golang deps for tests
```sh
> go get github.com/gruntwork-io/terratest/modules/terraform
> go get github.com/stretchr/testify/assert
```



### Tests

- Tests are available in `test` directory

- In the test directory, run the below command
```sh
go test
```



## Authors

This project is authored by below people

- Martin Fox

> This project was generated by [generator-tf-module](https://github.com/sudokar/generator-tf-module)
