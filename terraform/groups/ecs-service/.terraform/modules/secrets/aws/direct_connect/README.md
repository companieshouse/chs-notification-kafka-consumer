# direct_connect

> This project was generated by [generator-tf-module](https://github.com/sudokar/generator-tf-module)

## Overview

Creates Direct Connect resources required to connect existing hosted Direct Connect connections to an AWS network. Currently this only supports connecting to Transit Gateways.

## Usage

```hcl
module "direct_connect" {
  source = "git@github.com:companieshouse/terraform-modules//aws/direct_connect"

  name = "net"
  transit_gateway_id = "tgw-0262a0e521EXAMPLE"
  amazon_side_asn = 65200
  allowed_prefixes = [
    "1.2.3.4/24"
  ]
  aws_dx_connections = [
    {
      aws_dx_connection_id = "dxcon-1234abcd"
      vlan_id = 200
      bgp_asn = 65100
      bgp_auth_key = "qwerty"
      amazon_address = 1.2.3.4
      customer_address = 1.2.3.5
    },
    {
      aws_dx_connection_id = "dxcon-4321abcd"
      vlan_id = 201
      bgp_asn = 65101
      bgp_auth_key = "qwerty"
      amazon_address = 1.2.3.6
      customer_address = 1.2.3.7
    }
  ]
}
```



<!-- BEGINNING OF PRE-COMMIT-TERRAFORM DOCS HOOK -->
## Requirements

| Name | Version |
|------|---------|
| <a name="requirement_terraform"></a> [terraform](#requirement\_terraform) | >= 0.12.9, < 0.14 |
| <a name="requirement_aws"></a> [aws](#requirement\_aws) | >= 2.40.0, < 4.0 |

## Providers

| Name | Version |
|------|---------|
| <a name="provider_aws"></a> [aws](#provider\_aws) | >= 2.40.0, < 4.0 |

## Modules

No modules.

## Resources

| Name | Type |
|------|------|
| [aws_dx_gateway.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/dx_gateway) | resource |
| [aws_dx_gateway_association.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/dx_gateway_association) | resource |
| [aws_dx_transit_virtual_interface.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/resources/dx_transit_virtual_interface) | resource |
| [aws_ec2_transit_gateway_dx_gateway_attachment.this](https://registry.terraform.io/providers/hashicorp/aws/latest/docs/data-sources/ec2_transit_gateway_dx_gateway_attachment) | data source |

## Inputs

| Name | Description | Type | Default | Required |
|------|-------------|------|---------|:--------:|
| <a name="input_address_family"></a> [address\_family](#input\_address\_family) | n/a | `string` | `"ipv4"` | no |
| <a name="input_allowed_prefixes"></a> [allowed\_prefixes](#input\_allowed\_prefixes) | (Optional) VPC prefixes (CIDRs) to advertise to the Direct Connect gateway. | `list(string)` | `null` | no |
| <a name="input_amazon_side_asn"></a> [amazon\_side\_asn](#input\_amazon\_side\_asn) | The ASN to be configured on the Amazon side of the connection. | `number` | n/a | yes |
| <a name="input_aws_dx_connections"></a> [aws\_dx\_connections](#input\_aws\_dx\_connections) | A list of maps, with each map containing the required information on a existing provisioned hosted Direct Connect connection. | `list(map(any))` | `[]` | no |
| <a name="input_dx_transit_vif_mtu"></a> [dx\_transit\_vif\_mtu](#input\_dx\_transit\_vif\_mtu) | The MTU for virtual transit interfaces, can be either 1500 or 8500 | `number` | `1500` | no |
| <a name="input_name"></a> [name](#input\_name) | Unique identifier for resource naming | `string` | n/a | yes |
| <a name="input_tags"></a> [tags](#input\_tags) | A map of tags to apply to all taggable resources created by this module. | `map(string)` | `{}` | no |
| <a name="input_transit_gateway_id"></a> [transit\_gateway\_id](#input\_transit\_gateway\_id) | ID of the Transit Gateway to attach Direct Connect to. | `string` | `null` | no |

## Outputs

| Name | Description |
|------|-------------|
| <a name="output_aws_dx_transit_virtual_interface_arns"></a> [aws\_dx\_transit\_virtual\_interface\_arns](#output\_aws\_dx\_transit\_virtual\_interface\_arns) | The ARN's of the transit virtual interfaces. |
| <a name="output_aws_dx_transit_virtual_interface_aws_devices"></a> [aws\_dx\_transit\_virtual\_interface\_aws\_devices](#output\_aws\_dx\_transit\_virtual\_interface\_aws\_devices) | The Direct Connect endpoints on which the virtual interfaces terminate. |
| <a name="output_aws_dx_transit_virtual_interface_ids"></a> [aws\_dx\_transit\_virtual\_interface\_ids](#output\_aws\_dx\_transit\_virtual\_interface\_ids) | The ID's of the transit virtual interfaces. |
| <a name="output_aws_dx_transit_virtual_interface_jumbo_frames"></a> [aws\_dx\_transit\_virtual\_interface\_jumbo\_frames](#output\_aws\_dx\_transit\_virtual\_interface\_jumbo\_frames) | Indicates whether jumbo frames (8500 MTU) are supported. |
| <a name="output_aws_ec2_transit_gateway_dx_gateway_attachment_id"></a> [aws\_ec2\_transit\_gateway\_dx\_gateway\_attachment\_id](#output\_aws\_ec2\_transit\_gateway\_dx\_gateway\_attachment\_id) | EC2 Transit Gateway Attachment identifier, used for associating TGW route tables. |
| <a name="output_dx_gateway_associated_gateway_type"></a> [dx\_gateway\_associated\_gateway\_type](#output\_dx\_gateway\_associated\_gateway\_type) | The type of the associated gateway: transitGateway or virtualPrivateGateway. |
| <a name="output_dx_gateway_association_id"></a> [dx\_gateway\_association\_id](#output\_dx\_gateway\_association\_id) | The ID of the Direct Connect gateway association resource. |
| <a name="output_dx_gateway_id"></a> [dx\_gateway\_id](#output\_dx\_gateway\_id) | ID of the AWS Direct Connect Gateway |
<!-- END OF PRE-COMMIT-TERRAFORM DOCS HOOK -->

## Development

### Prerequisites

- [terraform](https://learn.hashicorp.com/terraform/getting-started/install#installing-terraform)
- [terraform-docs](https://github.com/segmentio/terraform-docs)
- [pre-commit](https://pre-commit.com/#install)
- [golang](https://golang.org/doc/install#install)
- [golint](https://github.com/golang/lint#installation)

### Configurations

- Configure pre-commit hooks
```sh
pre-commit install
```


- Configure golang deps for tests
```sh
> go get github.com/gruntwork-io/terratest/modules/terraform
> go get github.com/stretchr/testify/assert
>	go get github.com/aws/aws-sdk-go/aws
>	go get github.com/aws/aws-sdk-go/aws/session
>	go get github.com/aws/aws-sdk-go/service/directconnect
>	go get github.com/gruntwork-io/terratest/modules/aws
>	go get github.com/gruntwork-io/terratest/modules/terraform
```



### Tests

- Tests are available in `test` directory

- In the test directory, run the below command
```sh
go test
```



## Authors

This project is authored by below people

- Matt Stone

> This project was generated by [generator-tf-module](https://github.com/sudokar/generator-tf-module)
